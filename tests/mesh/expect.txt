func GuestList(someTitle string, guests []Guest, isAdmin bool, colors []string, loggedIn bool) string {
	var builder strings.Builder
	guestLoop := collect(guests, func(i int, guest Guest) string {
		var guestBuilder strings.Builder
		itemLoop := collect(guest.Items, func(i int, item Item) string {
			var itemBuilder strings.Builder
			colorLoop := collect(item.Colors, func(i int, color Color) string {
				var colorBuilder strings.Builder
                isAdminIf := gtmlIf(isAdmin, func() string {
                    var isAdminBuilder strings.Builder
                    isAdminBuilder.WriteString(`<div _if="isAdmin"><p>Hello Admin!</p></div>`)
                    if isAdmin {
                        return isAdminBuilder.String()
                    }
                    return ""
                })
				colorBuilder.WriteString(`<div _for="color of item.Colors []Color"><p>`)
				colorBuilder.WriteString(color.Shade)
				colorBuilder.WriteString(`</p><p>`)
				colorBuilder.WriteString(color.Hue)
				colorBuilder.WriteString(`</p>`)
                colorBuilder.WriteString(isAdminIf)
				colorBuilder.WriteString(`</div>`)
				return colorBuilder.String()
			})
			itemBuilder.WriteString(`<div _for="item of guest.Items []Item"><p>`)
			itemBuilder.WriteString(item.Name)
			itemBuilder.WriteString(`</p><p>`)
			itemBuilder.WriteString(item.Price)
			itemBuilder.WriteString(`</p>`)
			itemBuilder.WriteString(colorLoop)
			itemBuilder.WriteString(`</div>`)
			return itemBuilder.String()
		})
		guestBuilder.WriteString(`<div _for="guest of guests []Guest"><h1>`)
		guestBuilder.WriteString(guest.Name)
		guestBuilder.WriteString(`</h1><p>The guest has brought the following items:</p>`)
		guestBuilder.WriteString(itemLoop)
		guestBuilder.WriteString(`</div>`)
		return guestBuilder.String()
	})
	colorLoop := collect(colors, func(i int, color string) string {
		var colorBuilder strings.Builder
		colorBuilder.WriteString(`<div _for="color of colors []string"><p>`)
		colorBuilder.WriteString(color)
		colorBuilder.WriteString(`</p><p>`)
		colorBuilder.WriteString(color)
		colorBuilder.WriteString(`</p></div>`)
		return colorBuilder.String()
	})
    loggedInIf := gtmlIf(loggedIn, func() string {
		var loggedInBuilder strings.Builder
		loggedInBuilder.WriteString(`<div _if="loggedIn"><p>Logged in!</p></div>`)
		if loggedIn {
			return loggedInBuilder.String()
		}
		return ""
	})
	builder.WriteString(`<div _component="GuestList"><h1>`)
	builder.WriteString(someTitle)
	builder.WriteString(`</h1>`)
	builder.WriteString(guestLoop)
	builder.WriteString(colorLoop)
	builder.WriteString(loggedInIf)
	builder.WriteString(`</div>`)
	return builder.String()
}
